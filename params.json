{
  "name": "Exploratory Analysis of Nighttime Radiance Patterns and Mental Health",
  "tagline": "#DC",
  "body": "Created by Lei Kang(@leikang-stat), Lulu Cheng(@chenglulu1127) #Bayes Hack 2016\r\n\r\n## Objectives\r\n - Explore association between nighttime radiance intensity and mental disorder related death\r\n - Build county-level predictive models for mental disorder related death \r\n\r\n## Data\r\n1. Centers for Disease Control and Prevention (CDC)\r\n - Get Data from [here](http://wonder.cdc.gov/)\r\n - Data [Description](http://wonder.cdc.gov/DataSets.html)\r\n - Variable: Cause of death by county and month in 2014 due to Mental and Behavioral Disorders\r\n\r\n2. Nighttime VIIRS Day/Night\r\nSpecial thanks to Jeff, Star, Alex\r\n - [Raw Image Data](http://ngdc.noaa.gov/eog/viirs/download_monthly.html) for January 2014\r\n - 2014 County-level Aggregated Radiance [Data](https://github.com/bayesimpact/bayeshack-commerce-satellite/blob/master/analysis/VIIRS_centiles_exploration.ipynb)\r\n\r\n3. SES Data\r\n\r\n - Get Data from [here](http://www.ers.usda.gov/data-products/county-level-data-sets/download-data.aspx)\r\n - County-level monthly poverty, education, employment, population information for 2014\r\n\r\n\r\n## Exploratory Data Analysis\r\n\r\n[Interactive Visualization Dashboard](https://public.tableau.com/profile/publish/RadianceandMentalHelathAnalysis/Dashboard1#!/publish-confirm)\r\n\r\nWe observe a strong positive correlation between nighttime radiance intensity and mental disorder related death even after controlling for population based on the above Interactive plot.\r\n\r\nNow, let's explore a little bit about satellite images. Due to time constraint, we just focus on January, 2014. Then, 3220 county nightlight images are extracted using the following procedure:\r\n\r\n1.\tExtract pixel information based on county shape file using minimum coverage rectangle\r\n2.\tReplace non-county region with 0 (no radiance)\r\n3.\tResample different sizes of images to project onto the median-level reference image (size of 103 * 130) so that all counties are comparable in terms of lighting patterns. See the figure below for before and after comparison after normalization.\r\n![Caption for the picture.](https://github.com/bayeshack2016/LLK_Bayes/blob/master/Plot/beforeafter.png)\r\n\r\n4.\tUse PCA to construct Eigen-county patterns. The first eigen county map contains a lot of noise because image background is generally dark and not useful though they account for majority pixels. Thus, the first eigen county attemps to pick up noisy information as shown below. However, eigen 2, 3, 4 counties start to represent lighting patterns, see figure below. Need to mention that, we do not rescale every image because we care more about county-wise comparison.\r\n![](https://github.com/bayeshack2016/LLK_Bayes/blob/master/Plot/Eigen.png)\r\n\r\n5.\tUse PCA to reduce dimension from 103*130 to 8 and perform K-means clustering based on reduced-dimension data. Number of clusters are determined using residual sum of squares reduction, stability-based K-means, and dendrogram together. We end up with K=9 clusters. The idea of stability-based K-means is that if we perturb data a little bit (say by 20% or 40%) and run K-means based on two random subsamples of original data, how much the cluster assignments of two subsamples agree with each other. One can use percentage of matched observations as a metric. Then as this metric moves closer to 1, one tends to get more stable clustering result. We decide to use K=9 because matching metric starts to move insignificantly after K=9 and within sum of squares residuals also start to decay slowly after K=9. Both results are consistent with hierachical clustering dendrogram.\r\n![](https://github.com/bayeshack2016/LLK_Bayes/blob/master/Plot/Clustering.png)\r\n\r\nThe following figure presents selected raw images from two representative clusters. Cluster 1 tends to be more centered while cluster 2 tends to be more sparsely populated in terms of night time radiance. Both clusters can capture inherent different night time lighting patterns.\r\n![](https://github.com/bayeshack2016/LLK_Bayes/blob/master/Plot/Clusters.png)\r\n\r\n## Prediction Models for Death Counts\r\n\r\nAfter exploring satellite image data, we need to provide more useful insight on how it might influence mental disorder related death. To this end, we match county level monthly mental disorder related death data with aggregated county-level radiance data for year 2014. In the end, we got 9754 observations with matched death and nighttime radiance information where 75% of them is treated as a training set and the rest 25% is test set. We are going to predict county-level monthly mental disorder related death counts using the following features:\r\n\r\n1. SES: Population, poverty percentage, median income, unemployment rate, domestic migration rate, international migration rate, natural population growth rate, death rate, percentage of adults with less than high school degree, percentage of adults with high school degree, percentage of adults with college degree, percentage of adults with bachelor degree or more\r\n2. Spatial data: lat, lon of county\r\n3. Temporal data: month indicator\r\n4. Lighting data: County-wide sum of monthly average nighttime radiance \r\n\r\nWe apply the Super Learner idea (Ensemble learning) which combines outputs from the following 11 algorithms: Ridge, Lasso, Decision tree with pruning, Multivariate adaptive regression splines (MARS), Random forests, generalized additive model, SVM, Neural Network, linear regression, generalized boosting.\r\n\r\n5-fold CV is used to tune parameters in aforementioned algorithms and Super Learner seeks the best convex combination of those prediction results.\r\n\r\nRandom forests are found to have the best performance, followed by MARS and SVM. Thus, in the final Super Learner prediction, the weights of random forests output is very hight which is about 0.96. Other algorithms are not doing a good job in this dataset hence their weights are estimated to be 0. The following plots show the prediction performance on test set. The plot suggests that our prediction values are in line with true values.\r\n\r\n## Conclusions\r\nTo gain more insight about the importance of night time radiance in mental-relatd death prediction, we run a seperate random forests model using 1000 trees. See the importance measure below. Following population, aggregated county level monthly average night time radiance is the second most important predictor even after controling for other SES, spatial, and month effects. It gives us a strong indication that night time radiance is a mental health problem. However, assoication is not causation. We need to be careful in interpretating this result. But, the predicative model does suggest night time radiance is a good metric in predicting mental disorder related death and also presumably happiness and well-being.",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}